# vim: set filetype=sh : ~

REQUIRED=(config xdg history path aliases colors complection apps logout)

# http://stackoverflow.com/questions/4774054
SCRIPTPATH=`dirname "${BASH_SOURCE[0]}"`

load () {
    FILE=$SCRIPTPATH/$1

    if [ -f $FILE ]; then
        . $FILE
    fi
}

load_required () {
    load required/$1
}

load_optional () {
    load optional/$1
}

# async stuff
if [ -f ~/.local/bin/async_login_tasks ]; then
    (nohup ~/.local/bin/async_login_tasks >/dev/null 2>&1 &) >/dev/null 2>&1
fi

# required part
for item in ${REQUIRED[*]}; do
    load_required $item
done

# optional part
for item in $(ls $SCRIPTPATH/optional/); do
    echo "File -> $item"
    load_optional $item
done
