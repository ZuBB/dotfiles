#!/usr/bin/env bash

# Thanks a lot to all crowd that helped me to cook this script
# especially to comrads from next thread from LOR
# https://www.linux.org.ru/forum/development/11523950

for repo in `vcsh list`; do
     vcsh status "${repo}" | while read garbage fileName; do
        filePath=`echo $line | sed 's/^M //'`
	message="autoupdate of '`echo $fileName | sed 's/\.\.\///g'`'"
        vcsh run "${repo}" git commit "${fileName}" -m "${message}"
    done

    # https://github.com/RichiH/vcsh/issues/157
    vcsh run "${repo}" git push -q;
done
